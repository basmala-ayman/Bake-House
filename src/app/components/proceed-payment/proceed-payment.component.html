<div class="container-xl payment-section">
  <h1>Proceed to Payment</h1>
  
  <!-- Order Summary -->
  <div class="order-summary">
    <h2>Order Summary</h2>
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Quantity</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems">
          <td>{{ item.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ calcTotalPerItem(item.quantity, item.discount && item.discount > 0 ? calcDiscount(item.price, item.discount) : item.price) | currency: 'EGP': 'symbol-narrow' }}</td>
        </tr>
        <tr>
          <td><strong>Total</strong></td>
          <td></td>
          <td><strong>{{ getTotalPrice() | currency: 'EGP': 'symbol-narrow' }}</strong></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Billing Information -->
  <div class="billing-info">
    <h2>Billing Information</h2>
    
    <!-- Ensure the form is submitted properly -->
    <form (ngSubmit)="confirmPayment()" #paymentForm="ngForm">
      
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required ngModel>
      </div>
      
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required ngModel>
      </div>
      
      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" id="address" name="address" required ngModel>
      </div>
      
      <div class="form-group">
        <label for="card-number">Card Number</label>
        <input type="text" id="card-number" name="card-number" required ngModel>
      </div>
    
      <div class="form-group">
        <label for="expiry">Expiry Date</label>
        <input type="text" id="expiry" name="expiry" placeholder="MM/YY" required ngModel (input)="formatExpiryDate($event)">
      </div>
      
      <div class="form-group">
        <label for="cvv">CVV</label>
        <input type="text" id="cvv" name="cvv" required ngModel (input)="formatCvv($event)">
      </div>
  
      <!-- Payment Options -->
      <div class="payment-options">
        <h2>Payment Options</h2>
        <div class="option">
          <input type="radio" id="credit-card" name="payment-method" value="credit-card" required ngModel>
          <label for="credit-card"><i class="fa-solid fa-credit-card"></i> Credit Card</label>
        </div>
        <div class="option">
          <input type="radio" id="cash-on-delivery" name="payment-method" value="cash-on-delivery" required ngModel>
          <label for="cash-on-delivery"><i class="fa-solid fa-money-bill-wave"></i> Cash on Delivery</label>
        </div>
        <div class="option">
          <input type="radio" id="installment" name="payment-method" value="installment" required ngModel>
          <label for="installment"><i class="fa-solid"></i> Installment</label>
        </div>
      </div>
  
      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary submit-btn btn-sm">Confirm Payment</button>

    </form>
  </div>
</div>
